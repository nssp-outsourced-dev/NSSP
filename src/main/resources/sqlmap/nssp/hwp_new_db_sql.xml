<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'> 
<sqlMap namespace="hwp">
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 조사 -->
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- 서식1 변호인 변호사 참여신청 -->
	<select id="selectHwp00000000000000000278" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			A.TRGTER_NM /* 성명 */
			, C.ITIV_NO /* 내사번호 */ 
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM /* 죄명 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
			, FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM /* 담당자 */
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN#
	</select>
	
	<!-- 서식2 대표변호인 지정 등 건의 -->
	<select id="selectHwp00000000000000000279" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			A.TRGTER_NM /* 성명 */
			, C.ITIV_NO /* 내사번호 */ 
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM /* 죄명 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
			, FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM /* 담당자 */
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN#
	</select>
	 
	<!-- 서식11 참고인 출석요구 -->
	<select id="selectHwp00000000000000000280" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE
		FROM (
			SELECT
				D.TRGTER_NM AS TRGTER_NM,
				(CASE WHEN D.WRC_NM IS NOT NULL THEN TRIM(D.WRC_NM) ||'와(과) ' END) AS WRC_NM,
				FN_RC_VIOLT_ROOT_NM(A.RC_NO) AS VIOLT_ROOT_NM,
				TO_NUMBER(TO_CHAR(A.ATEND_DEMAND_DT,'YYYY'))||'. '||TO_NUMBER(TO_CHAR(A.ATEND_DEMAND_DT,'MM'))||'. '||TO_NUMBER(TO_CHAR(A.ATEND_DEMAND_DT,'DD'))||'. '
				|| TO_NUMBER(TO_CHAR(A.ATEND_DEMAND_DT,'HH24'))||':'||TO_CHAR(A.ATEND_DEMAND_DT,'MI') AS ATEND_DEMAND_DT,
				UR.TEL_NO AS TEL_NO,
				FN_USER_NM(B.CHARGER_ID) AS CHARGER_NM,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM,
				/*TO_CHAR(A.DEMAND_SN) AS DEMAND_SN,*/
				FN_CNVR_NO(A.VIEW_SN) AS DEMAND_SN,
				CASE WHEN D.TRGTER_SE_CD = '00697' THEN '정당한 이유 없이 출석요구에 응하지 아니하면 형사소송법의 규정에 따라 체포될 수 있습니다.'
				END AS ADD_MSG			/*피의자메세지*/
			FROM INV_PRSCT_ATEND A
			LEFT JOIN RC_TMPR_TRGTER D ON A.RC_NO = D.RC_NO AND A.TRGTER_SN = D.TRGTER_SN
			LEFT JOIN RC_TMPR B ON A.RC_NO = B.RC_NO
			LEFT JOIN CMN_USER UR ON B.CHARGER_ID = UR.ESNTL_ID
			WHERE A.RC_NO   = #P_RC_NO#
				AND A.TRGTER_SN = #P_TRGTER_SN#
				AND A.DEMAND_SN = #P_DEMAND_SN#
				AND A.USE_YN != 'N'
		) A
		RIGHT JOIN DUAL D ON 1 = 1
	</select>
	
	<!-- 서식13 동석신청서(피의자) -->
	<select id="selectHwp00000000000000000281" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(null, null) AS S_DATE
		FROM (
			SELECT
				RC_NO,
				TO_NUMBER(SUBSTR(A.CASE_NO , INSTR(A.CASE_NO, '-')+1)) AS CASE_NO,
				FN_RC_VIOLT_UPPER_NMS (A.RC_NO) AS VIOLT_NM,
				FN_RC_VIOLT_ROOT_NM(A.RC_NO) AS VIOLT_ROOT_NM,
				NVL(FN_RC_TRGTER_NM(A.RC_NO, '00697'),' ') AS TRGTER_NMS,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM,
				FN_USER_NM(A.CHARGER_ID) AS CHARGER_NM,
				A.CRMNL_FACT,
				A.PRSCT_DE /* 승인 일자 */
			FROM RC_TMPR A
			WHERE A.RC_NO = #P_RC_NO#
		) A
		RIGHT JOIN DUAL D ON 1 = 1
	</select>
	
	<!-- 서식14 동석신청서(피해자) -->
	<select id="selectHwp00000000000000000282" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(null, null) AS S_DATE
		FROM (
			SELECT
				RC_NO,
				TO_NUMBER(SUBSTR(A.CASE_NO , INSTR(A.CASE_NO, '-')+1)) AS CASE_NO,
				FN_RC_VIOLT_UPPER_NMS (A.RC_NO) AS VIOLT_NM,
				FN_RC_VIOLT_ROOT_NM(A.RC_NO) AS VIOLT_ROOT_NM,
				NVL(FN_RC_TRGTER_NM(A.RC_NO, '00697'),' ') AS TRGTER_NMS,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM,
				FN_USER_NM(A.CHARGER_ID) AS CHARGER_NM,
				A.CRMNL_FACT,
				A.PRSCT_DE /* 승인 일자 */
			FROM RC_TMPR A
			WHERE A.RC_NO = #P_RC_NO#
		) A
		RIGHT JOIN DUAL D ON 1 = 1
	</select>
	
	<!-- 서식15 수사과정확인서(조사시) -->
	<select id="selectHwp00000000000000000283" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
		    A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE
		FROM (
	        SELECT
	            FN_CNVR_NO(C.CASE_NO) AS CASE_NO,
	            FN_CNVR_NO(A.RC_NO) AS RC_NO,
	            A.TRGTER_SE_CD,
	            A.TRGTER_SN,
	            A.TRGTER_NM,
	            DGUARD.DECRYPT('TBL','ENC',A.TRGTER_RRN) AS TRGTER_RRN,
	            FN_CD_NM(A.OCCP_CD) || (CASE WHEN A.WRC_NM IS NOT NULL THEN ' (' || TRIM(A.WRC_NM) || ')' END) AS OCCP_NM,
	            A.ADRES_ADDR AS DWLSIT_ADDR,    	/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
	            A.REGBS_ADDR AS REGBS_ADDR,        	/*등록지*/
	            A.WRC_ADDR AS WRC_ADDR,             /*직장주소*/
	            DGUARD.DECRYPT('TBL','ENC',A.OWNHOM_TEL) AS OWNHOM_TEL,     /*자택전화*/
	            DGUARD.DECRYPT('TBL','ENC',A.HP_NO) AS HP_NO,          		/*휴대전화*/
	            A.WRC_TEL,          /*직장*/
	            A.EMAIL,
	            FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM,
	            FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM
	        FROM RC_TMPR_TRGTER A
	        JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
	        WHERE A.RC_NO 		= #P_RC_NO#
	          AND A.TRGTER_SN 	= #P_TRGTER_SN#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식16 수사과정확인서(미조사시) -->
	<select id="selectHwp00000000000000000284" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT    
		    A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE
		FROM (
	        SELECT
	            FN_CNVR_NO(C.CASE_NO) AS CASE_NO,
	            FN_CNVR_NO(A.RC_NO) AS RC_NO,
	            A.TRGTER_SE_CD,
	            A.TRGTER_SN,
	            A.TRGTER_NM,
	            DGUARD.DECRYPT('TBL','ENC',A.TRGTER_RRN) AS TRGTER_RRN,
	            FN_CD_NM(A.OCCP_CD) || (CASE WHEN A.WRC_NM IS NOT NULL THEN ' (' || TRIM(A.WRC_NM) || ')' END) AS OCCP_NM,
	            A.ADRES_ADDR AS DWLSIT_ADDR,    	/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
	            A.REGBS_ADDR AS REGBS_ADDR,        	/*등록지*/
	            A.WRC_ADDR AS WRC_ADDR,             /*직장주소*/
	            DGUARD.DECRYPT('TBL','ENC',A.OWNHOM_TEL) AS OWNHOM_TEL,     /*자택전화*/
	            DGUARD.DECRYPT('TBL','ENC',A.HP_NO) AS HP_NO,          		/*휴대전화*/
	            A.WRC_TEL,          /*직장*/
	            A.EMAIL,
	            FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM,
	            FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM
	        FROM RC_TMPR_TRGTER A
	        JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
	        WHERE A.RC_NO 		= #P_RC_NO#
	          AND A.TRGTER_SN 	= #P_TRGTER_SN#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	 
	<!-- 진술조서(2회 이상) -->
	<select id="selectHwp00000000000000000285" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			A.TRGTER_NM  	AS INPUT_1,
			A.TRGTER_RRN	AS INPUT_3,
			A.OCCP_NM		AS INPUT_4,
			A.WRC_NM		AS INPUT_5,	/*직장명*/
			A.DWLSIT_ADDR 	AS INPUT_6,
			A.REGBS_ADDR	AS INPUT_7,
			A.WRC_ADDR		AS INPUT_8,
			A.OWNHOM_TEL	AS INPUT_9,
			A.HP_NO			AS INPUT_10,
			A.WRC_TEL		AS INPUT_11,
			A.EMAIL			AS INPUT_12,
			A.VIOLT_ROOT_NM AS INPUT_13,
			FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS INPUT_14,
			A.CHARGER_NM 	AS INPUT_15,
			WRITNG_NM 		AS INPUT_16,
			/*
		    	2021.09.09
		    	coded by dgkim
		    	진술조서 OOO외명으로 표시하도록 수정
		    */
		    SUSPCT_NM || '명' AS INPUT_17
		FROM (
			SELECT
				TRGTER_SN,
				TRGTER_NM,
				TRGTER_RRN,
				OCCP_NM,
				WRC_NM,
				DWLSIT_ADDR,
				REGBS_ADDR,
				WRC_ADDR,
				OWNHOM_TEL,
				HP_NO,
				WRC_TEL,
				EMAIL,
				FN_RC_VIOLT_ROOT_NM(RC_NO) AS VIOLT_ROOT_NM,
				CHARGER_NM,
				WRITNG_NM,
				/*
			    	2021.09.09
			    	coded by dgkim
			    	진술조서 OOO외명으로 표시하도록 수정
			    */
			    SUSPCT_NM,
				SORT_ORDR
			FROM (
				SELECT
					A.RC_NO,
					C.CASE_NO,
					A.TRGTER_SE_CD,
					A.TRGTER_SN,
					A.TRGTER_NM,
					DGUARD.DECRYPT('TBL','ENC',A.TRGTER_RRN) AS TRGTER_RRN,
					FN_CD_NM(A.OCCP_CD) AS OCCP_NM,
					A.WRC_NM,
					A.ADRES_ADDR AS DWLSIT_ADDR,		/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
					A.REGBS_ADDR AS REGBS_ADDR,			/*등록지*/
					A.WRC_ADDR AS WRC_ADDR,			/*직장주소*/
					DGUARD.DECRYPT('TBL','ENC',A.OWNHOM_TEL) AS OWNHOM_TEL,		/*자택전화*/
					DGUARD.DECRYPT('TBL','ENC',A.HP_NO) AS HP_NO,			/*휴대전화*/
					A.WRC_TEL,			/*직장*/
					A.EMAIL,
					FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
					FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM,
					(
						SELECT
							LISTAGG(RT.TRGTER_NM,', ') WITHIN GROUP(ORDER BY TRGTER_SN)
						FROM RC_TMPR_TRGTER RT
						WHERE RT.USE_YN = 'Y'
						AND RT.RC_NO  = A.RC_NO
						AND RT.TRGTER_SE_CD = '00697'
					) TRGTER_NM_S,	/*피의자*/
					/*
				    	2021.09.09
				    	coded by dgkim
				    	진술조서 OOO외명으로 표시하도록 수정
				    */
					FN_RC_TRGTER_NM(A.RC_NO,'00697') AS SUSPCT_NM,
					A.SORT_ORDR
				FROM RC_TMPR_TRGTER A
				JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
				WHERE A.RC_NO = #P_RC_NO#
					AND A.TRGTER_SN = #P_TRGTER_SN#
			) A
		) A
		ORDER BY A.SORT_ORDR, A.TRGTER_SN
	</select>
	
	<!-- 진술조서(통역인 참여시) -->
	<select id="selectHwp00000000000000000286" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			A.TRGTER_NM  	AS INPUT_1,
			A.TRGTER_RRN	AS INPUT_3,
			A.OCCP_NM		AS INPUT_4,
			A.WRC_NM		AS INPUT_5,	/*직장명*/
			A.DWLSIT_ADDR 	AS INPUT_6,
			A.REGBS_ADDR	AS INPUT_7,
			A.WRC_ADDR		AS INPUT_8,
			A.OWNHOM_TEL	AS INPUT_9,
			A.HP_NO			AS INPUT_10,
			A.WRC_TEL		AS INPUT_11,
			A.EMAIL			AS INPUT_12,
			A.VIOLT_ROOT_NM AS INPUT_13,
			FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS INPUT_14,
			A.CHARGER_NM 	AS INPUT_15,
			WRITNG_NM 		AS INPUT_16,
			/*
		    	2021.09.09
		    	coded by dgkim
		    	진술조서 OOO외명으로 표시하도록 수정
		    */
		    SUSPCT_NM || '명' AS INPUT_17
		FROM (
			SELECT
				TRGTER_SN,
				TRGTER_NM,
				TRGTER_RRN,
				OCCP_NM,
				WRC_NM,
				DWLSIT_ADDR,
				REGBS_ADDR,
				WRC_ADDR,
				OWNHOM_TEL,
				HP_NO,
				WRC_TEL,
				EMAIL,
				FN_RC_VIOLT_ROOT_NM(RC_NO) AS VIOLT_ROOT_NM,
				CHARGER_NM,
				WRITNG_NM,
				/*
			    	2021.09.09
			    	coded by dgkim
			    	진술조서 OOO외명으로 표시하도록 수정
			    */
			    SUSPCT_NM,
				SORT_ORDR
			FROM (
				SELECT
					A.RC_NO,
					C.CASE_NO,
					A.TRGTER_SE_CD,
					A.TRGTER_SN,
					A.TRGTER_NM,
					DGUARD.DECRYPT('TBL','ENC',A.TRGTER_RRN) AS TRGTER_RRN,
					FN_CD_NM(A.OCCP_CD) AS OCCP_NM,
					A.WRC_NM,
					A.ADRES_ADDR AS DWLSIT_ADDR,		/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
					A.REGBS_ADDR AS REGBS_ADDR,			/*등록지*/
					A.WRC_ADDR AS WRC_ADDR,			/*직장주소*/
					DGUARD.DECRYPT('TBL','ENC',A.OWNHOM_TEL) AS OWNHOM_TEL,		/*자택전화*/
					DGUARD.DECRYPT('TBL','ENC',A.HP_NO) AS HP_NO,			/*휴대전화*/
					A.WRC_TEL,			/*직장*/
					A.EMAIL,
					FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
					FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM,
					(
						SELECT
							LISTAGG(RT.TRGTER_NM,', ') WITHIN GROUP(ORDER BY TRGTER_SN)
						FROM RC_TMPR_TRGTER RT
						WHERE RT.USE_YN = 'Y'
						AND RT.RC_NO  = A.RC_NO
						AND RT.TRGTER_SE_CD = '00697'
					) TRGTER_NM_S,	/*피의자*/
					/*
				    	2021.09.09
				    	coded by dgkim
				    	진술조서 OOO외명으로 표시하도록 수정
				    */
					FN_RC_TRGTER_NM(A.RC_NO,'00697') AS SUSPCT_NM,
					A.SORT_ORDR
				FROM RC_TMPR_TRGTER A
				JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
				WHERE A.RC_NO = #P_RC_NO#
					AND A.TRGTER_SN = #P_TRGTER_SN#
			) A
		) A
		ORDER BY A.SORT_ORDR, A.TRGTER_SN
	</select>
	 
	<!-- 피의자신문조서(2회 이상) -->
	<select id="selectHwp00000000000000000287" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE
		FROM (
			SELECT
				FN_CNVR_NO(C.CASE_NO) AS CASE_NO,
				FN_CNVR_NO(A.RC_NO) AS RC_NO,
				A.TRGTER_SE_CD,
				A.TRGTER_SN,
				A.TRGTER_NM,
				DGUARD.DECRYPT('TBL','ENC',A.TRGTER_RRN) AS TRGTER_RRN,
				FN_CD_NM(A.OCCP_CD) || (CASE WHEN A.WRC_NM IS NOT NULL THEN ' (' || TRIM(A.WRC_NM) || ')' END) AS OCCP_NM,
				A.ADRES_ADDR AS DWLSIT_ADDR,		/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				A.REGBS_ADDR AS REGBS_ADDR,		/*등록지*/
				A.WRC_ADDR AS WRC_ADDR,			/*직장주소*/
				DGUARD.DECRYPT('TBL','ENC',A.OWNHOM_TEL) AS OWNHOM_TEL,		/*자택전화*/
				DGUARD.DECRYPT('TBL','ENC',A.HP_NO) AS HP_NO,			/*휴대전화*/
				A.WRC_TEL,			/*직장*/
				A.EMAIL,
				FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM,
				FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM
			FROM RC_TMPR_TRGTER A
				JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			WHERE A.RC_NO 		= #P_RC_NO#
				AND A.TRGTER_SN 	= #P_TRGTER_SN#
		) A
		RIGHT JOIN DUAL D ON 1 = 1
	</select>
	
	<!-- 서식- 유치인 조사요청서 -->
	<select id="selectHwp00000000000000000288" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
		WHERE A.RC_NO = #P_RC_NO# AND ROWNUM <![CDATA[ <= ]]> 1
	</select>
	
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 내사수사 -->
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- 서식5 수사개시 보고 -->
	<select id="selectHwp00000000000000000289" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CNVR_NO(C.ITIV_NO) AS ITIV_NO /* 내사번호 */ 
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM /* 죄명 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
			, FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM /* 담당자 */
		FROM RC_TMPR C
		WHERE C.RC_NO = #P_RC_NO#
	</select>
	
	<!-- 서식8 범법자 출입국 규제 요청 지휘 건의 -->
	<select id="selectHwp00000000000000000299" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			FN_CNVR_NO(X.SUGEST_NO) AS SUGEST_NO /* 건의 번호 */
			--X.RC_NO,
			, FN_CNVR_NO((SELECT RT.CASE_NO FROM RC_TMPR RT WHERE RT.RC_NO = X.RC_NO)) AS CASE_NO /* 사건번호 */
			--(SELECT FN_OZ_DATE2(TO_CHAR(RT.RC_DT,'YYYYMMDD'),null) FROM RC_TMPR RT WHERE RT.RC_NO = X.RC_NO) AS RC_DT,
			, X.TRGTER_NM || CASE WHEN REGEXP_INSTR(SUBSTR(X.TRGTER_NM,-1,1),'[0-9]') > 0 THEN '명' END AS TRGTER_NM /* 성명 */
			, X.TRGTER_RRN /* 주민등록번호 */
			, X.DWLSIT_ADDR /* 주거 */
			, X.REGBS_ADDR /* 등록기분지 */
			--FN_CD_NM(X.SUGEST_TY_CD) AS SUGEST_TY_NM,
			, TO_CHAR(TO_DATE(X.SUGEST_DE,'YYYYMMDD'),'YYYY. MM. DD') AS SUGEST_DE /* 건의 일자 */
			, TO_CHAR(TO_DATE(X.CMND_DE,'YYYYMMDD'),'YYYY. MM. DD') AS CMND_DE /* 지휘 일자 */
			--FN_RCV_EXMN_NM((SELECT FN_EXMN_NM(IP.CMPTNC_EXMN_CD) FROM RC_TMPR IP WHERE IP.RC_NO = X.RC_NO)) AS CMPTNC_EXMN_NM,
			, FN_RC_VIOLT_ROOT_NM(X.RC_NO) AS VIOLT_NM /* 죄명 */
			, FN_USER_NM(WRITNG_ID) AS OZ_NM /* 작성자 */
			, FN_OZ_DATE(null, null) AS OZ_DT /* 현재일 */
			, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = X.WRITNG_ID) AS CLSF_NM /* 직급 */
			, FN_CD_NM(X.SEXDSTN_CD) AS SEXDSTN_NM /* 성별 */
			, X.PASPORT_NO /* 여권번호 */
			, FN_CD_NM(X.OCCP_CD) AS OCCP_NM /* 직업 */
		FROM
		(
			SELECT
				MAX(S.SUGEST_NO) AS SUGEST_NO,
				MAX(S.RC_NO) AS RC_NO,
				MAX(S.SUGEST_TY_CD) AS SUGEST_TY_CD,
				MAX(S.SUGEST_DE) AS SUGEST_DE,
				MAX(S.CMND_DE) AS CMND_DE,
				MAX(PT.TRGTER_NM) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) || (CASE WHEN COUNT(DISTINCT(PT.TRGTER_SN)) > 1 THEN ' 외 '||(COUNT(DISTINCT(PT.TRGTER_SN))-1) END) AS TRGTER_NM,
				MAX(DGUARD.DECRYPT('TBL','ENC',PT.TRGTER_RRN)) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) AS TRGTER_RRN,
				MAX(PT.ADRES_ADDR) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) AS DWLSIT_ADDR,	/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				MAX(S.WRITNG_ID) AS WRITNG_ID
				, MAX(PT.SEXDSTN_CD) AS SEXDSTN_CD
				, MAX(PT.PASPORT_NO) AS PASPORT_NO
				, MAX(PT.OCCP_CD) AS OCCP_CD
				, MAX(PT.REGBS_ADDR) AS REGBS_ADDR
			FROM INV_SUGEST S
			LEFT JOIN RC_TMPR_TRGTER PT ON S.RC_NO = PT.RC_NO AND PT.TRGTER_SE_CD IN (SELECT CC.ESNTL_CD FROM CMN_CD CC WHERE CC.UPPER_CD = '00102'  AND CC.CD_DC = 'suspct-Group')
			WHERE S.SUGEST_NO = #P_SUGEST_NO# AND S.USE_YN = 'Y'
		) X
	</select>
	
	<!-- 서식27 수사사항조회 -->
	<select id="selectHwp00000000000000000300" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			A.*
			, FN_CNVR_NO(A.CASE_YYYY) AS CNVR_NO
			, SUBSTR(A.CASE_YYYY,0,4) || ' ' || A.NAME || ' 제' || TO_NUMBER(SUBSTR(A.CASE_YYYY , INSTR(A.CASE_YYYY, '-')+1)) || '호' AS RC_SE_NM /* 원안위 사건번호 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
		FROM (
			SELECT 
				A.TRGTER_NM /* 성명 */
				, FN_CNVR_NO(C.ITIV_NO) AS ITIV_NO /* 내사번호 */
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO /* 사건번호 */
				, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM /* 죄명 */
				, FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM /* 담당자 */
				, (CASE WHEN C.RC_SE_CD = 'F' THEN 
						CASE_NO
						WHEN C.RC_SE_CD = 'I' THEN
						ITIV_NO
						WHEN C.RC_SE_CD = 'T' OR RC_SE_CD IS NULL THEN
						TMPR_NO
						END) AS CASE_YYYY
				, (CASE WHEN C.RC_SE_CD = 'F' THEN
						'수사'
						WHEN C.RC_SE_CD = 'I' THEN
						'내사'
						WHEN C.RC_SE_CD = 'T' OR RC_SE_CD = NULL THEN
						'임시'
						END) AS NAME
				, CU.TEL_NO
				, CU.FAX_NO
			FROM RC_TMPR_TRGTER A
				JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
				JOIN CMN_USER CU ON CU.ESNTL_ID = C.CHARGER_ID
			WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 송치 -->
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 서식 - 수사진행상황 통지서  -->
	<select id="selectHwp00000000000000000301" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CNVR_NO(TRN_NO) TRN_NO /* 송치번호 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
			, FN_RC_TRGTER_NM(RC_NO, '00697') TRGTER_NM /* 피의자 성명 */
			, FN_TRN_DOC_VIOLT(TRN_NO) VIOLT_NM_LIST /* 죄명 */
			, FN_CNVR_NO(CASE_NO) CASE_NO /* 사건번호 */
			, CMPTNC_EXMN_NM /* 송치기관 */
			, NVL(TRN_DE, FN_OZ_DATE(NULL, NULL)) TRN_DE /* 송치 일자 */
			, FN_TRN_DOC_OPTION(TRN_NO) TRN_OPTION_NM_LIST /*송치 의견 */
			, TEL_NO /* 담당자 전화번호 */
			, CLSF_NM /* 직급 */
			, USER_NM /* 담당자명 */
		FROM (
			SELECT 
				A.TRN_NO
				, FN_OZ_DATE(TRN_DE, NULL) TRN_DE
				, FN_EXMN_NM (A.CMPTNC_EXMN_CD) CMPTNC_EXMN_NM
				--, FN_CD_NM (INV_PROVIS_CD) INV_PROVIS_NM
				--, FN_OZ_DATE(TO_CHAR(RC_DT, 'YYYYMMDD'), NULL) RC_DT
				, CASE_NO
				--, FN_OZ_DATE(PRSCT_DE, NULL) PRSCT_DE /* 입건일자 */
				, FN_CD_NM(CLSF_CD) CLSF_NM
				--, C.USER_NM
				, FN_USER_NM(B.CHARGER_ID) AS USER_NM -- 담당자로 변경 by dgkim
				--, DECODE(EVDENC_YN, 'Y', '있음', '없음')  EVDENC_YN
				--, EVDENC_DC
				--, TRN_RM /* 송치 비고 */
				, C.TEL_NO
				, B.RC_NO
			FROM TRN_CASE A
				, RC_TMPR B
				, CMN_USER C
			WHERE A.RC_NO = B.RC_NO
				AND A.USE_YN = 'Y'
				AND B.USE_YN = 'Y'
				AND B.WRITNG_ID = C.ESNTL_ID
				AND A.TRN_NO = #P_TRN_NO#
		) RIGHT JOIN DUAL ON 1=1
	</select>
	
	<!-- 서식 - 서식 지명수배,지명통보자 전산입력요구서
	<select id="selectHwp00000000000000000302" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		
	</select>
	  -->
	<!-- 서식138 추가 송부  -->
	<select id="selectHwp00000000000000000303" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CNVR_NO(TRN_NO) TRN_NO /* 송치번호 */
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE /* 현재일 */
			, CMPTNC_EXMN_NM /* 송치기관 */
			, FN_RC_TRGTER_NM(RC_NO, '00697') TRGTER_NM /* 피의자 성명 */
			, NVL(TRN_DE, FN_OZ_DATE(NULL, NULL)) TRN_DE /* 송치 일자 */
			, FN_CNVR_NO(CASE_NO) CASE_NO /* 사건번호 */
			, TRN_RM
			, CLSF_NM /* 직급 */
			, USER_NM /* 담당자명 */
		FROM 
		(
			SELECT 
				A.TRN_NO
				, FN_OZ_DATE(TRN_DE, NULL) TRN_DE
				, FN_EXMN_NM (A.CMPTNC_EXMN_CD) CMPTNC_EXMN_NM
				, CASE_NO
				, FN_CD_NM(CLSF_CD) CLSF_NM
				--, C.USER_NM
				, FN_USER_NM(B.CHARGER_ID) AS USER_NM -- 담당자로 변경 by dgkim
				, TRN_RM /* 송치 비고 */
				, B.RC_NO
			FROM TRN_CASE A
				, RC_TMPR B
				, CMN_USER C
			WHERE A.RC_NO = B.RC_NO
				AND A.USE_YN = 'Y'
				AND B.USE_YN = 'Y'
				AND B.WRITNG_ID = C.ESNTL_ID
				AND A.TRN_NO = #P_TRN_NO#
		) RIGHT JOIN DUAL ON 1=1
	</select>
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 사건대장 -->
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 영장 -->
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- 서식9 수사기일 연장지휘 건의 -->
	<select id="selectHwp00000000000000000318" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			FN_CNVR_NO(X.SUGEST_NO) AS SUGEST_NO,
			X.RC_NO,
			FN_CNVR_NO((SELECT RT.CASE_NO FROM RC_TMPR RT WHERE RT.RC_NO = X.RC_NO)) AS CASE_NO,
			(SELECT FN_OZ_DATE2(TO_CHAR(RT.RC_DT,'YYYYMMDD'),null) FROM RC_TMPR RT WHERE RT.RC_NO = X.RC_NO) AS RC_DT,
			X.TRGTER_NM || CASE WHEN REGEXP_INSTR(SUBSTR(X.TRGTER_NM,-1,1),'[0-9]') > 0 THEN '명' END AS TRGTER_NM,
			X.TRGTER_RRN,
			X.DWLSIT_ADDR,
			FN_CD_NM(X.SUGEST_TY_CD) AS SUGEST_TY_NM,
			TO_CHAR(TO_DATE(X.SUGEST_DE,'YYYYMMDD'),'YYYY. MM. DD.') AS SUGEST_DE,
			TO_CHAR(TO_DATE(X.CMND_DE,'YYYYMMDD'),'YYYY. MM. DD') AS CMND_DE,
			FN_RCV_EXMN_NM((SELECT FN_EXMN_NM(IP.CMPTNC_EXMN_CD) FROM RC_TMPR IP WHERE IP.RC_NO = X.RC_NO)) AS CMPTNC_EXMN_NM,
			FN_RC_VIOLT_ROOT_NM(X.RC_NO) AS VIOLT_NM,
			FN_USER_NM(WRITNG_ID) AS OZ_NM,
			(SELECT FN_OZ_DATE(PRSCT_DE, null) FROM RC_TMPR rt WHERE rt.RC_NO = X.RC_NO) AS OZ_DT--FN_OZ_DATE(null, null) AS OZ_DT 입건일자로 변경 by dgkim
			, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = X.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
			, X.CMND_PRSEC_NM --검사명
		FROM
		(
			SELECT
				MAX(S.SUGEST_NO) AS SUGEST_NO,
				MAX(S.RC_NO) AS RC_NO,
				MAX(S.SUGEST_TY_CD) AS SUGEST_TY_CD,
				MAX(S.SUGEST_DE) AS SUGEST_DE,
				MAX(S.CMND_DE) AS CMND_DE,
				MAX(PT.TRGTER_NM) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) || (CASE WHEN COUNT(DISTINCT(PT.TRGTER_SN)) > 1 THEN ' 외 '||(COUNT(DISTINCT(PT.TRGTER_SN))-1) END) AS TRGTER_NM,
				MAX(DGUARD.DECRYPT('TBL','ENC',PT.TRGTER_RRN)) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) AS TRGTER_RRN,
				MAX(PT.ADRES_ADDR) KEEP(DENSE_RANK FIRST ORDER BY PT.SORT_ORDR,PT.TRGTER_SN ASC) AS DWLSIT_ADDR,	/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				MAX(S.WRITNG_ID) AS WRITNG_ID,
				MAX(S.CMND_PRSEC_NM) AS CMND_PRSEC_NM
			FROM INV_SUGEST S
			LEFT JOIN RC_TMPR_TRGTER PT ON S.RC_NO = PT.RC_NO AND PT.TRGTER_SE_CD IN (SELECT CC.ESNTL_CD FROM CMN_CD CC WHERE CC.UPPER_CD = '00102'  AND CC.CD_DC = 'suspct-Group')
			WHERE S.SUGEST_NO = #P_SUGEST_NO# AND S.USE_YN = 'Y'
		) X
	</select>
	
	<!-- 서식28 권리 고지 확인서(체포) (구 확인서)-->
	<select id="selectHwp00000000000000000319" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT  TO_CHAR(I.ARRST_SN) AS ARRST_SN,          /*긴급체포 일련번호*/
					B.TRGTER_NM,
					DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN,
					B.TRGTER_AGE AS TRGTER_AGE,
					B.ADRES_ADDR AS DWLSIT_ADDR,    /*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
					TO_NUMBER(TO_CHAR(I.ARRST_DT,'YYYY'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'MM'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'DD'))||'. '
					||TO_NUMBER(TO_CHAR(I.ARRST_DT,'HH24'))||':'||TO_CHAR(I.ARRST_DT,'MI') AS ARRST_DT,
					I.ARRST_PLACE,
					FN_CD_NM (I.ARRST_TY_CD) AS ARRST_TY_NM,
					FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
					FN_USER_NM(I.WRITNG_ID) AS WRITNG_NM,
					'체포' AS ARRST_TY
				FROM INV_PRSCT_ARRST I
				LEFT JOIN RC_TMPR_TRGTER B ON I.RC_NO = B.RC_NO AND I.TRGTER_SN = B.TRGTER_SN AND B.USE_YN = 'Y'
				LEFT JOIN RC_TMPR C ON I.RC_NO = C.RC_NO
				WHERE I.USE_YN = 'Y'
					AND I.RC_NO = #P_RC_NO#
					AND I.TRGTER_SN = #P_TRGTER_SN#
					AND I.ARRST_SN = #P_ARRST_SN#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식28 권리 고지 확인서(구속양식) (구 확인서(체포ㆍ구속적부심))-->
	<select id="selectHwp00000000000000000338" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT  TO_CHAR(I.ARRST_SN) AS ARRST_SN,          /*긴급체포 일련번호*/
					B.TRGTER_NM,
					DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN,
					B.TRGTER_AGE AS TRGTER_AGE,
					B.ADRES_ADDR AS DWLSIT_ADDR,    /*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
					TO_NUMBER(TO_CHAR(I.ARRST_DT,'YYYY'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'MM'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'DD'))||'. '
					||TO_NUMBER(TO_CHAR(I.ARRST_DT,'HH24'))||':'||TO_CHAR(I.ARRST_DT,'MI') AS ARRST_DT,
					I.ARRST_PLACE,
					FN_CD_NM (I.ARRST_TY_CD) AS ARRST_TY_NM,
					FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
					FN_USER_NM(I.WRITNG_ID) AS WRITNG_NM,
					'체포' AS ARRST_TY
				FROM INV_PRSCT_ARRST I
				LEFT JOIN RC_TMPR_TRGTER B ON I.RC_NO = B.RC_NO AND I.TRGTER_SN = B.TRGTER_SN AND B.USE_YN = 'Y'
				LEFT JOIN RC_TMPR C ON I.RC_NO = C.RC_NO
				WHERE I.USE_YN = 'Y'
					AND I.RC_NO = #P_RC_NO#
					AND I.TRGTER_SN = #P_TRGTER_SN#
					<!-- AND I.ARRST_SN = #P_ARRST_SN# -->
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식37 피의자 석방보고 -->
	<select id="selectHwp00000000000000000320" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			q.ZRLONG_NO --영장번호
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'), '') AS S_DATE --작성일
			, FN_CD_NM(q.ZRLONG_SE_CD) AS ZRLONG_SE_NM --영장 구분 코드
			, FN_OZ_DATE(TO_CHAR(s.ISUE_DT, 'YYYYMMDD'), '') AS ISUE_DT--영장발부일시
			, (SELECT TRGTER_NM FROM RC_TMPR_TRGTER WHERE RC_NO = q.RC_NO AND TRGTER_SN = q.TRGTER_SN) AS TRGTER_NM--구속자
			, FN_RC_VIOLT_ROOT_NM(q.RC_NO) AS VIOLT_NM --죄명
			, (SELECT FN_USER_NM(CHARGER_ID) FROM RC_TMPR WHERE RC_NO = q.RC_NO) AS CHARGER_NM --담당자
		FROM INV_ZRLONG_REQST q
			INNER JOIN INV_ZRLONG_RESULT s ON q.ZRLONG_NO = s.ZRLONG_NO AND q.ZRLONG_SE_CD = s.ZRLONG_SE_CD
		WHERE q.RC_NO = #P_RC_NO#
			AND q.TRGTER_SN = #P_TRGTER_SN#
	</select>
	
	<!-- 서식44 체포ㆍ구속 통지 등 -->
	<select id="selectHwp00000000000000000339" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
		    SELECT  TO_CHAR(I.ARRST_SN) AS ARRST_SN,          /*긴급체포 일련번호*/
		            B.TRGTER_NM,
		            DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN,
		            B.ADRES_ADDR AS DWLSIT_ADDR,    /*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
		            TO_NUMBER(TO_CHAR(I.ARRST_DT,'YYYY'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'MM'))||'. '||TO_NUMBER(TO_CHAR(I.ARRST_DT,'DD'))||'. '||
		            TO_NUMBER(TO_CHAR(I.ARRST_DT,'HH24'))||':'||TO_CHAR(I.ARRST_DT,'MI')  AS ARRST_DT,
		            FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM,
		            NVL(I.ATTRACT_PLACE,I.CNFNM_PLACE) AS ATTRACT_PLACE,
		            FN_CD_NM (I.ARRST_TY_CD) AS ARRST_TY_NM,
					FN_EXMN_CMPTNC_DC (C.CMPTNC_EXMN_CD) AS EXMN_CMPTNC_DC,
		            I.ARRESTER_NM, 						/*체포자성명*/
		            I.ARRESTER_PSITN,
		            F.TEL_NO AS ARRESTER_TEL, 			/*체포자 연락처*/
		            FN_USER_NM(C.CHARGER_ID) AS CHARGER_NM,
		            FN_USER_NM(I.WRITNG_ID) AS WRITNG_NM,
					'체포' AS ARRST_TYPE
		        FROM INV_PRSCT_ARRST I
		        LEFT JOIN RC_TMPR_TRGTER B ON I.RC_NO = B.RC_NO AND I.TRGTER_SN = B.TRGTER_SN AND B.USE_YN = 'Y'
		        LEFT JOIN RC_TMPR C ON I.RC_NO = C.RC_NO
		        LEFT JOIN CMN_USER F ON I.ARRESTER_ID = F.ESNTL_ID
		        WHERE I.USE_YN = 'Y'
		          AND I.RC_NO = #P_RC_NO#
		          AND I.TRGTER_SN = #P_TRGTER_SN#
		          AND I.ARRST_SN = #P_ARRST_SN#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식56 압수ㆍ수색ㆍ검증영장신청(금융계좌 추적용) -->
	<select id="selectHwp00000000000000000358_1" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				'제 '||FN_CNVR_NO(Q.ZRLONG_REQST_NO)||' 호' AS ZRLONG_REQ_NO,
				FN_EXMN_NM(P.CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM,
				NVL(TO_CHAR(Q.VALID_DT,'YYYY'),'2000')||'년 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'MM')),'0')||'월 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'DD')),'0')||'일' AS VALID_DT,
				FN_RC_VIOLT_ROOT_NM(Q.RC_NO) AS VIOLT_ROOT_NM,
				Q.COUNSL_NM,
				Q.SZURE_THING,
				Q.SRCHNG_TRGET,
				P.CRMNL_FACT AS CRMNL_FACT, /*범죄사실*/
				Q.SRCHNG_RESN AS SRCHNG_RESN,
				Q.ACNUT_NM_CD,
				Q.ACNUT_BANK||'ㆍ'||ACNUT_NO AS ACNUT_BANK_NO,
				Q.DELNG_PD,
				Q.DELNG_CN,
				Q.EXCUTER_ID,
				FN_CD_NM(NVL(U.RSPOFC_CD,U.CLSF_CD)) || ' ' || U.USER_NM AS EXCUTER,
				TO_CHAR(Q.EXCUT_DT,'YYYY')||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'MM'))||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'DD'))||' '||
				TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'HH24'))||':'||TO_CHAR(Q.EXCUT_DT,'MI') AS EXCUT_DT,
				NVL(SZURE_ZRLONG_CD,'00790') AS SZURE_ZRLONG_CD, /*사전*/
				FN_DEPT_NM(P.CHARGER_DEPT_CD) AS CHARGER_DEPT,
				FN_USER_NM(P.CHARGER_ID) AS CHARGER_NM,
				FN_USER_NM(Q.WRITNG_ID) AS WRITNG_NM
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = Q.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
			FROM INV_SZURE_REQST Q
			LEFT JOIN RC_TMPR P ON Q.RC_NO = P.RC_NO
			LEFT JOIN CMN_USER U ON Q.EXCUTER_ID = U.ESNTL_ID
			WHERE Q.ZRLONG_REQST_YN = 'Y'
				AND Q.RC_NO = #P_RC_NO#
				AND Q.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<select id="selectHwp00000000000000000358_2" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			ROW_NUMBER() OVER(ORDER BY B.SORT_ORDR, B.TRGTER_SN)||'.' AS RM_L,
			B.TRGTER_NM AS TRGTER_NM_L,
			CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN B.TRGTER_CPRN  ELSE DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) END AS TRGTER_RRN_L,
			(CASE WHEN B.WRC_NM IS NOT NULL THEN B.WRC_NM||' ' END)||FN_CD_NM(B.OCCP_CD) OCCP_NM_L,
			CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN NVL(B.ADRES_ADDR,B.WRC_ADDR) ELSE B.ADRES_ADDR END AS ADDR_L,
			'성    명' AS T1,
			CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN '법인등록번호 ' ELSE '주민등록번호 ' END AS T2,
			'직   업' AS T3,
			CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN '소 재 지'   	 ELSE '주   거' END AS T4
			, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
		FROM INV_SZURE_APPLCNT A
		JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
		WHERE B.USE_YN = 'Y'
			AND A.RC_NO = #P_RC_NO#
			AND A.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		ORDER BY B.SORT_ORDR, B.TRGTER_SN ASC
	</select>
	
	<select id="selectHwp00000000000000000358_3" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			ROW_NUMBER() OVER(ORDER BY A.WRITNG_DT)||'.' AS RNM_L,
			(CASE WHEN A.ACNUT_NM_CD = '01339' THEN '■' END) AS ACNUT_NM_CD1_L,
			(CASE WHEN A.ACNUT_NM_CD = '01340' THEN '■' END) AS ACNUT_NM_CD2_L,
			NVL(A.ACNUT_NM, FN_CD_NM(A.ACNUT_NM_CD)) AS ACNUT_NM_L,
			A.ACNUT_BANK || ' · ' || A.ACNUT_NO AS ACNUT_BANK_NO_L,
			A.DELNG_PD AS DELNG_PD_L,
			A.DELNG_CN AS DELNG_CN_L,
			'계좌명의인' AS TT1,
			'개설은행ㆍ계좌번호' AS TT2,
			'거래기간' AS TT3,
			'거래정보등의내용' AS TT4
			, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = A.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
		FROM INV_SZURE_ACNUT A
		JOIN INV_SZURE_REQST B ON A.RC_NO = B.RC_NO AND A.ZRLONG_REQST_NO = B.ZRLONG_REQST_NO
		WHERE B.SZURE_ZRLONG_CD = '00792'  /*거래 계좌*/
		  AND A.RC_NO = #P_RC_NO#
		  AND A.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		ORDER BY A.WRITNG_DT
	</select>
	
	<!-- 서식57 압수ㆍ수색ㆍ검증영장신청(사후) -->
	<select id="selectHwp00000000000000000359_1" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
		        '제 '||FN_CNVR_NO(Q.ZRLONG_REQST_NO)||' 호' AS ZRLONG_REQ_NO,
		        FN_EXMN_NM(P.CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM,
		        NVL(TO_CHAR(Q.VALID_DT,'YYYY'),'2000')||'년 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'MM')),'0')||'월 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'DD')),'0')||'일' AS VALID_DT,
		        FN_RC_VIOLT_ROOT_NM(Q.RC_NO) AS VIOLT_ROOT_NM,
		        Q.COUNSL_NM,
		        Q.SZURE_THING,
		        Q.SRCHNG_TRGET,
		        P.CRMNL_FACT AS CRMNL_FACT, /*범죄사실*/
		        Q.SRCHNG_RESN AS SRCHNG_RESN,
		        Q.ACNUT_NM_CD,
		        Q.ACNUT_BANK||'ㆍ'||ACNUT_NO AS ACNUT_BANK_NO,
		        Q.DELNG_PD,
		        Q.DELNG_CN,
		        Q.EXCUTER_ID,
		        FN_CD_NM(NVL(U.RSPOFC_CD,U.CLSF_CD)) || ' ' || U.USER_NM AS EXCUTER,
		        TO_CHAR(Q.EXCUT_DT,'YYYY')||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'MM'))||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'DD'))||' '||
		        TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'HH24'))||':'||TO_CHAR(Q.EXCUT_DT,'MI') AS EXCUT_DT,
		        NVL(SZURE_ZRLONG_CD,'00790') AS SZURE_ZRLONG_CD, /*사전*/
		        FN_DEPT_NM(P.CHARGER_DEPT_CD) AS CHARGER_DEPT,
		        FN_USER_NM(P.CHARGER_ID) AS CHARGER_NM,
		        FN_USER_NM(Q.WRITNG_ID) AS WRITNG_NM
		        , (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = Q.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
		    FROM INV_SZURE_REQST Q
		    LEFT JOIN RC_TMPR P ON Q.RC_NO = P.RC_NO
		    LEFT JOIN CMN_USER U ON Q.EXCUTER_ID = U.ESNTL_ID
		    WHERE Q.ZRLONG_REQST_YN = 'Y'
		      AND Q.RC_NO = #P_RC_NO#
		      AND Q.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	<select id="selectHwp00000000000000000359_2" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
            ROW_NUMBER() OVER(ORDER BY B.SORT_ORDR, B.TRGTER_SN)||'.' AS RM_L,
            B.TRGTER_NM AS TRGTER_NM_L,
            CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN B.TRGTER_CPRN  ELSE DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) END AS TRGTER_RRN_L,
            (CASE WHEN B.WRC_NM IS NOT NULL THEN B.WRC_NM||' ' END)||FN_CD_NM(B.OCCP_CD) OCCP_NM_L,
            CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN NVL(B.ADRES_ADDR,B.WRC_ADDR) ELSE B.ADRES_ADDR END AS ADDR_L,
            '성    명' AS T1,
		    CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN '법인등록번호 ' ELSE '주민등록번호 ' END AS T2,
		    '직   업' AS T3,
		    CASE WHEN NVL(B.TRGTER_TY_CD,'I') = 'E' THEN '소 재 지'   	 ELSE '주   거' END AS T4
		    , (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
        FROM INV_SZURE_APPLCNT A
        JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
        WHERE B.USE_YN = 'Y'
          AND A.RC_NO = #P_RC_NO#
          AND A.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
        ORDER BY B.SORT_ORDR, B.TRGTER_SN ASC
	</select>
	<select id="selectHwp00000000000000000359_3" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			ROW_NUMBER() OVER(ORDER BY A.WRITNG_DT)||'.' AS RNM_L,
			(CASE WHEN A.ACNUT_NM_CD = '01339' THEN '■' END) AS ACNUT_NM_CD1_L,
			(CASE WHEN A.ACNUT_NM_CD = '01340' THEN '■' END) AS ACNUT_NM_CD2_L,
		    NVL(A.ACNUT_NM, FN_CD_NM(A.ACNUT_NM_CD)) AS ACNUT_NM_L,
		    A.ACNUT_BANK || ' · ' || A.ACNUT_NO AS ACNUT_BANK_NO_L,
		    A.DELNG_PD AS DELNG_PD_L,
		    A.DELNG_CN AS DELNG_CN_L,
		    '계좌명의인' AS TT1,
	       	'개설은행ㆍ계좌번호' AS TT2,
	       	'거래기간' AS TT3,
	       	'거래정보등의내용' AS TT4
	       	, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = A.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
		FROM INV_SZURE_ACNUT A
		JOIN INV_SZURE_REQST B ON A.RC_NO = B.RC_NO AND A.ZRLONG_REQST_NO = B.ZRLONG_REQST_NO
        WHERE B.SZURE_ZRLONG_CD = '00792'  /*거래 계좌*/
		  AND A.RC_NO = #P_RC_NO#
		  AND A.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		ORDER BY A.WRITNG_DT
	</select>
	
	<!-- 서식59 전자정보 삭제ㆍ폐기 또는 반환 확인서 -->
	<select id="selectHwp00000000000000000398" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE --현재일
			, FN_USER_NM(CHARGER_ID) AS CHARGER_NM --담당자명
		FROM RC_TMPR
		WHERE RC_NO = #P_RC_NO#
	</select>
	
	<!-- 서식60 정보저장매체 복제 등 참관여부 확인서 -->
	<select id="selectHwp00000000000000000399" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(DATE_FORMAT(SYS_DATETIME, '%Y%m%d'),'') AS S_DATE FROM (
			SELECT
		        '제 '||FN_CNVR_NO(Q.ZRLONG_REQST_NO)||' 호' AS ZRLONG_REQ_NO,
		        FN_EXMN_NM(P.CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM,
		        NVL(TO_CHAR(Q.VALID_DT,'YYYY'),'2000')||'년 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'MM')),'0')||'월 '||NVL(TO_NUMBER(TO_CHAR(Q.VALID_DT,'DD')),'0')||'일' AS VALID_DT,
		        FN_RC_VIOLT_NM(Q.RC_NO) AS VIOLT_ROOT_NM,
		        Q.COUNSL_NM,
		        Q.SZURE_THING,
		        Q.SRCHNG_TRGET,
		        P.CRMNL_FACT AS CRMNL_FACT, /*범죄사실*/
		        Q.SRCHNG_RESN AS SRCHNG_RESN,
		        Q.ACNUT_NM_CD,
		        Q.ACNUT_BANK||'ㆍ'||ACNUT_NO AS ACNUT_BANK_NO,
		        Q.DELNG_PD,
		        Q.DELNG_CN,
		        Q.EXCUTER_ID,
		        FN_CD_NM(NVL(U.RSPOFC_CD,U.CLSF_CD)) || ' ' || U.USER_NM AS EXCUTER,
		        TO_CHAR(Q.EXCUT_DT,'YYYY')||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'MM'))||'-'||TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'DD'))||' '||
		        TO_NUMBER(TO_CHAR(Q.EXCUT_DT,'HH24'))||':'||TO_CHAR(Q.EXCUT_DT,'MI') AS EXCUT_DT,
		        NVL(SZURE_ZRLONG_CD,'00790') AS SZURE_ZRLONG_CD, /*사전*/
		        FN_DEPT_NM(P.CHARGER_DEPT_CD) AS CHARGER_DEPT,
		        FN_USER_NM(P.CHARGER_ID) AS CHARGER_NM,
		        FN_USER_NM(Q.WRITNG_ID) AS WRITNG_NM
		        , (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = Q.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
		    FROM INV_SZURE_REQST Q
		    LEFT JOIN RC_TMPR P ON Q.RC_NO = P.RC_NO
		    LEFT JOIN CMN_USER U ON Q.EXCUTER_ID = U.ESNTL_ID
		    WHERE Q.ZRLONG_REQST_YN = 'Y'
		      AND Q.RC_NO = #P_RC_NO#
		      AND Q.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식61 정보저장매체 제출 등 참관여부 확인서 -->
	<select id="selectHwp00000000000000000400" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE --현재일
			, FN_USER_NM(CHARGER_ID) AS CHARGER_NM --담당자명
		FROM RC_TMPR
		WHERE RC_NO = #P_RC_NO#
	</select>
	
	<!-- 서식65 수색결과 증명서 -->
	<select id="selectHwp00000000000000000360" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CASE_NO(rq.RC_NO) AS CASE_NO --사건번호
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE --현재일
			, FN_RC_VIOLT_ROOT_NM (rq.RC_NO) AS VIOLT_NM --죄명
			, FN_OZ_DATE(TO_CHAR(rq.EXCUT_DT, 'YYYYMMDD'), '') AS EXCUT_DT --집행일시
			, rs.EXCUT_PLACE --집행장소
			, rq.SZURE_THING --압수물건
			, (SELECT FN_USER_NM(CHARGER_ID) FROM RC_TMPR WHERE RC_NO = rq.RC_NO) AS CHARGER_NM --담당자명
		FROM INV_SZURE_REQST rq 
			LEFT JOIN INV_SZURE_RESULT rs
			ON rq.RC_NO = rs.RC_NO AND rq.ZRLONG_REQST_NO = rs.ZRLONG_REQST_NO
		WHERE rq.ZRLONG_REQST_YN = 'Y' 
			AND rq.RC_NO = #P_RC_NO#
			AND rq.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
	</select>
	
	<!-- 서식93 통신사실 확인자료제공요청 집행사실 통지보고 -->
	<select id="selectHwp00000000000000000418" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식94 송ㆍ수신이 완료된 전기통신에 대한 압수ㆍ수색ㆍ검증 집행사실 통지 -->
	<select id="selectHwp00000000000000000421" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식98 통신사실 확인자료제공 요청 -->
	<select id="selectHwp00000000000000000422" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	<!-- 서식100 통신사실 확인자료제공 요청 집행조서 -->
	<select id="selectHwp00000000000000000423" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	<!-- 서식102 통신사실 확인자료제공 요청중지통지 -->
	<select id="selectHwp00000000000000000424" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	<!-- 서식103 통신사실 확인자료제공 요청 집행결과보고 -->
	<select id="selectHwp00000000000000000425" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식104 통신사실 확인자료제공 요청허가신청 -->
	<select id="selectHwp00000000000000000426" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식108 통신사실 확인자료제공 요청허가 신청(사후) -->
	<select id="selectHwp00000000000000000427" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식109 통신사실 확인자료제공 요청 집행사실 통지 -->
	<select id="selectHwp00000000000000000428" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식111 통신사실 확인자료제공 요청 집행사실 통지유예 승인신청 -->
	<select id="selectHwp00000000000000000431" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식118 영장반환 보고 -->
	<select id="selectHwp00000000000000000430" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.*, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE FROM (
			SELECT
				FN_CNVR_NO(A.PRMISN_PROGRS_NO) AS PRMISN_PROGRS_NO, --허가 진행 번호
				B.TRGTER_NM, --대상자명
				DGUARD.DECRYPT('TBL','ENC',B.TRGTER_RRN) AS TRGTER_RRN, --주민번호
				B.ADRES_ADDR AS DWLSIT_ADDR,			/*주거지:DWLSIT_ZIP 주소:ADRES_ADDR*/
				FN_CD_NM(B.OCCP_CD) AS OCCP_NM, --직업
				A.COMMN_BSNM, --통신 사업자
				A.REQUST_RESN, --요청 사유
				A.SBSCRBER_RELATE, --가입자연관
				A.DTA_SCOPE, --자료범위
				A.RERQEST_RESN, --재청구사유
				A.DSMSSL_RESN, --기각사유
				FN_EXMN_NM(CMPTNC_EXMN_CD) AS CMPTNC_EXMN_NM, --관할검찰명
				FN_EXMN_CMPTNC_DC (CMPTNC_EXMN_CD)  AS EXMN_CMPTNC_DC, --관할검찰코드
				UR.USER_NM AS CHARGER_NM, --담당자
				UR.TEL_NO, --담당자 전화번호
				FN_USER_NM(A.WRITNG_ID) AS WRITNG_NM, --작성자
				UR.FAX_NO AS FAX_NO --담당자 팩스
				, (SELECT FN_CD_NM(cu.CLSF_CD) FROM CMN_USER cu WHERE ESNTL_ID = B.WRITNG_ID) AS CLSF_NM -- 직급 by dgkim
				, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
				, SUBSTR(FN_CNVR_NO(A.PRMISN_PROGRS_NO), 6) AS PRMISN_PROGRS_NUM
				, UR.EMAIL --이메일
				, FN_RC_VIOLT_ROOT_NM (C.RC_NO) AS VIOLT_NM --위반죄명
				, FN_CD_NM(A.PRMISN_SE_CD) AS PRMISN_SE_NM --허가 구분 명
				, FN_OZ_DATE(A.REQST_DE,'') AS REQST_DE --신청일
			FROM INV_COMMN_PRMISN A
			LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND A.TRGTER_SN = B.TRGTER_SN
			LEFT JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			LEFT JOIN CMN_USER UR ON C.CHARGER_ID = UR.ESNTL_ID
			WHERE A.USE_YN = 'Y'
				AND A.PRMISN_PROGRS_NO = #P_PRMISN_PROGRS_NO#
		) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
	
	<!-- 서식- 피의자 입감 지휘서 -->
	<select id="selectHwp00000000000000000378" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			NVL(TO_CHAR(R.CNFNM_DT, 'YY'), '') AS Y --입감 년도
			, NVL(TO_CHAR(R.CNFNM_DT, 'MM'), '') AS M --입감 월
			, NVL(TO_CHAR(R.CNFNM_DT, 'DD'), '') AS D --입감 일
			, NVL(TO_CHAR(R.CNFNM_DT, 'HH24'), '') AS H --입감 시
			, NVL(TO_CHAR(R.CNFNM_DT, 'MI'), '') AS MI --입감 분
			, A.TRGTER_NM --피의자 성명
			, A.TRGTER_AGE --피의자 나이
			, A.ADRES_ADDR --피의자 주소
			, FN_CD_NM(A.OCCP_CD) AS OCCP_NM --피의자 직업
			, A.WRC_TEL --직장 전화
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM --죄명
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			JOIN INV_ZRLONG_REQST R ON R.RC_NO = A.RC_NO AND R.TRGTER_SN = A.TRGTER_SN 
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN# AND R.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
	</select>
	
	<!-- 서식- 피의자 출감 지휘서 -->
	<select id="selectHwp00000000000000000379" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			NVL(TO_CHAR(R.CNFNM_DT, 'YY'), '') AS Y --입감 년도
			, NVL(TO_CHAR(R.CNFNM_DT, 'MM'), '') AS M --입감 월
			, NVL(TO_CHAR(R.CNFNM_DT, 'DD'), '') AS D --입감 일
			, NVL(TO_CHAR(R.CNFNM_DT, 'HH24'), '') AS H --입감 시
			, NVL(TO_CHAR(R.CNFNM_DT, 'MI'), '') AS MI --입감 분
			, A.TRGTER_NM --피의자 성명
			, A.TRGTER_AGE --피의자 나이
			, A.ADRES_ADDR --피의자 주소
			, FN_CD_NM(A.OCCP_CD) AS OCCP_NM --피의자 직업
			, A.WRC_TEL --직장 전화
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM --죄명
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			JOIN INV_ZRLONG_REQST R ON R.RC_NO = A.RC_NO AND R.TRGTER_SN = A.TRGTER_SN 
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN# AND R.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
	</select>
	
	<!-- 서식- 피의자(유치인)접견 등 금지요청서 -->
	<select id="selectHwp00000000000000000380" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CNVR_NO(R.ZRLONG_REQST_NO) AS ZRLONG_REQST_NO --영장 신청 번호
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE --현재일
			, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM --죄명
			, A.TRGTER_NM --피의자 성명
			, DGUARD.DECRYPT('TBL','ENC', A.TRGTER_RRN) AS TRGTER_RRN --피의자 주민번호
			, FN_CD_NM(A.OCCP_CD) AS OCCP_NM --피의자 직업
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			JOIN INV_ZRLONG_REQST R ON R.RC_NO = A.RC_NO AND R.TRGTER_SN = A.TRGTER_SN 
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN# AND R.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
	</select>
	
	<!-- 서식- 피의자(유치인)접견 등 금지취소 요청 -->
	<select id="selectHwp00000000000000000381" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
			FN_CNVR_NO(R.ZRLONG_REQST_NO) AS ZRLONG_REQST_NO --영장 신청 번호
			, FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') AS S_DATE --현재일
			, FN_CNVR_NO(C.CASE_NO) AS CASE_NO --사건번호
			, FN_RC_VIOLT_ROOT_NM(C.RC_NO) AS VIOLT_ROOT_NM --죄명
			, A.TRGTER_NM --피의자 성명
			, DGUARD.DECRYPT('TBL','ENC', A.TRGTER_RRN) AS TRGTER_RRN --피의자 주민번호
			, FN_CD_NM(A.OCCP_CD) AS OCCP_NM --피의자 직업
		FROM RC_TMPR_TRGTER A
			JOIN RC_TMPR C ON A.RC_NO = C.RC_NO
			JOIN INV_ZRLONG_REQST R ON R.RC_NO = A.RC_NO AND R.TRGTER_SN = A.TRGTER_SN 
		WHERE A.RC_NO = #P_RC_NO# AND A.TRGTER_SN = #P_TRGTER_SN# AND R.ZRLONG_REQST_NO = #P_ZRLONG_REQST_NO#
	</select>
	
	<!-- 입건압수조서 > 수사보고서 (구 수사보고서 양식 변경) -->
	<select id="selectHwp00000000000000000401_1" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT A.ITIV_YYYY
			 , A.ITIV_NO
			 , A.CHARGER_NM
			 , A.VIOLT_NM
			 , A.VIOLT_ROOT_NM
			 , A.TRGTER_NMS || CASE WHEN REGEXP_INSTR(SUBSTR(A.TRGTER_NMS,-1,1),'[0-9]') > 0 THEN '명' END AS TRGTER_NMS
		     -- , FN_OZ_DATE(null, null) AS S_DATE
		      , A.S_DATE -- 승인 일자로 수정 by dgkim 
		      , A.NAME
		      , A.ITIV_YYYY || ' ' || A.NAME || ' 제' || A.ITIV_NO || '호' AS RC_SE_NM
		  FROM (
				SELECT REGEXP_SUBSTR(ITIV_NO, '[^-]+', 1, 1, 'i') AS ITIV_YYYY
			 		 , LTRIM(REGEXP_SUBSTR(ITIV_NO, '[^-]+', 1, 2, 'i'),0) AS ITIV_NO
			 		 , FN_USER_NM (CHARGER_ID) AS CHARGER_NM
			 		 , FN_RC_VIOLT_ROOT_NM(RT.RC_NO) AS VIOLT_NM
			 		 , FN_RC_VIOLT_ROOT_NM(RT.RC_NO) AS VIOLT_ROOT_NM
		        	 , FN_RC_TRGTER_NM(RT.RC_NO, '00697') AS TRGTER_NMS
		        	 , (SELECT NVL2(ITIV_RESULT_REPORT_DT, TO_CHAR(ITIV_RESULT_REPORT_DT, 'YYYY.fmMM.DD'), TO_CHAR(SYSDATE, 'YYYY.fmMM.DD')) FROM RC_ITIV_RESULT WHERE ITIV_NO = RT.ITIV_NO) AS S_DATE -- 승인 일자로 수정 by dgkim
		        	 , (CASE WHEN RC_SE_CD = 'F' THEN
						'수사'
    					WHEN RC_SE_CD = 'I' THEN
    					'내사'
   						WHEN RC_SE_CD = 'T' OR RC_SE_CD = NULL THEN
    					''
    					END) AS NAME 
		  		  FROM RC_TMPR RT
		 	     WHERE RT.RC_NO = #P_RC_NO#
		 	   ) A RIGHT OUTER JOIN DUAL ON 1=1
	</select>
	
	<select id="selectHwp00000000000000000401_2" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		<include refid="hwp.commonTrgtersByFormatTypeD" />
	</select>
	
	<!-- 입건압수조서 > 기록목록 -->
	<select id="selectHwp00000000000000000402" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
	<![CDATA[
		SELECT * FROM (
		SELECT
		       A.RCORD_NM
		     , A.RCORD_STATER
		     , NVL2(A.RCORD_NM, FN_OZ_DATE2(A.RCORD_DE, null), '') RCORD_DE
		     , A.RCORD_CO
		  FROM TRN_RCORD A
		 WHERE A.RC_NO = #P_RC_NO#
		 ORDER BY A.SORT_ORDR
		)
	]]>
	</select>
	
	<!-- 영상녹화 > 수사보고서 -->
	<select id="selectHwp00000000000000000458" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT
			FN_OZ_DATE(TO_CHAR(SYSDATE,'YYYYMMDD'),'') S_DATE, /* 2021-05-11 hsno  작성 일자로 변경*/
			A.WRITNG_NM,
			A.CHARGER_NM
			/*, A.S_DATE -- 승인 일자로 수정 by dgkim*/
		FROM (
				SELECT
					FN_USER_NM(NVL(A.WRITNG_ID, B.WRITNG_ID)) AS WRITNG_NM
					, FN_CHARGER_NM(FN_USER_NM(A.CHARGER_ID)) AS CHARGER_NM --담당자로 변경 by dgkim
					/*, TO_CHAR(NVL2(A.PRSCT_DE, TO_DATE(A.PRSCT_DE, 'YYYY-MM-DD'), SYSDATE), 'YYYY.fmMM.DD') AS S_DATE -- 승인 일자로 수정 by dgkim*/
				FROM RC_TMPR A
				LEFT JOIN RC_TMPR_TRGTER B ON A.RC_NO = B.RC_NO AND B.TRGTER_SN = #P_TRGTER_SN#
				WHERE A.RC_NO   = #P_RC_NO#
					AND A.USE_YN != 'N'
			) A
		RIGHT JOIN DUAL D ON 1=1
	</select>
</sqlMap>